webpackJsonp([4],{Ookg:function(e,t){},tj2P:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("BO1k"),a=i.n(r),n=i("gyMJ"),o={mixins:[i("msXN").a],data:function(){return{centerDialogVisible:!1,editVible:!1,deleteVisible:!1,registerForm:{name:"",sex:"1",birth:"",location:"",introduction:""},form:{id:"",name:"",sex:"1",birth:"",location:"",introduction:""},tableData:[],tempData:[],select_word:"",pageSize:5,currentPage:1,idx:-1,multipleSelection:[],rules:{name:[{required:!0,message:"请输入歌手名",trigger:"blur"}],birth:[{required:!0,message:"请输入正确的生日",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],location:[{required:!0,message:"请输入国籍",trigger:"blur"}]}}},computed:{data:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},watch:{select_word:function(){if(""==this.select_word)this.tableData=this.tempData;else{this.tableData=[];var e=!0,t=!1,i=void 0;try{for(var r,n=a()(this.tempData);!(e=(r=n.next()).done);e=!0){var o=r.value;o.name.includes(this.select_word)&&this.tableData.push(o)}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.currentPage=e},getData:function(){var e=this;this.tableData=[],this.tempData=[],Object(n.j)().then(function(t){e.tableData=t,e.tempData=t,e.currentPage=1})},addSinger:function(){var e=this;this.$refs.registerForm.validate(function(t){if(t){var i=e.registerForm.birth,r=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),a=new URLSearchParams;a.append("name",e.registerForm.name),a.append("sex",e.registerForm.sex),a.append("pic","/img/singerPic/hhh.jpg"),a.append("birth",r),a.append("location",e.registerForm.location),a.append("introduction",e.registerForm.introduction),Object(n.s)(a).then(function(t){1==t.code?(e.getData(),e.notify(t.msg,"success")):e.notify(t.msg,"error")}).catch(function(e){console.log(e)}),e.centerDialogVisible=!1}})},handleEdit:function(e){this.editVible=!0,this.form={id:e.id,name:e.name,sex:e.sex,birth:e.birth,location:e.location,introduction:e.introduction}},editSave:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i=new Date(e.form.birth),r=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),a=new URLSearchParams;a.append("id",e.form.id),a.append("name",e.form.name),a.append("sex",e.form.sex),a.append("birth",r),a.append("location",e.form.location),a.append("introduction",e.form.introduction),Object(n.y)(a).then(function(t){1==t.code?(e.getData(),e.notify(t.msg,"success")):e.notify(t.msg,"error")}).catch(function(e){console.log(e)}),e.editVible=!1}})},uploadPic:function(e){return this.$store.state.HOST+"/singer/updateSingerPic?id="+e},deleteRow:function(){var e=this;Object(n.f)(this.idx).then(function(t){t?(e.getData(),e.notify("删除成功","success")):e.notify("删除失败","error")}).catch(function(e){console.log(e)}),this.deleteVisible=!1},songEdit:function(e,t){this.$router.push({path:"/Song",query:{id:e,name:t}})}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),i("el-input",{staticClass:"handle-input",attrs:{size:"mini",placeholder:"请输入需要检索的歌手名"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("添加歌手")])],1)]),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",height:"680px",data:e.data},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"110",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"歌手图片",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"singer-img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.getUrl(t.row.pic)}})]),e._v(" "),i("el-upload",{attrs:{action:e.uploadPic(t.row.id),"before-upload":e.beforeAvatorUpload,"on-success":e.handleAvatorSuccess}},[i("el-button",{attrs:{size:"mini"}},[e._v("更新图片")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"歌手",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"性别",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.changeSex(t.row.sex))+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"生日",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.attachBirth(t.row.birth))+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"location",label:"地区",width:"100",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"简介",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticStyle:{height:"100px",overflow:"scroll"}},[e._v(e._s(t.row.introduction))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"歌曲管理",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticStyle:{height:"100px",overflow:"scroll"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.songEdit(t.row.id,t.row.name)}}},[e._v("歌曲管理")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:"添加歌手",visible:e.centerDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"80px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"name",label:"歌手名",size:"mini"}},[i("el-input",{attrs:{placeholder:"歌手名"},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别",size:"mini"}},[i("el-radio-group",{model:{value:e.registerForm.sex,callback:function(t){e.$set(e.registerForm,"sex",t)},expression:"registerForm.sex"}},[i("el-radio",{attrs:{label:0}},[e._v("女")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("组合")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("不明")])],1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:"生日",size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.registerForm.birth,callback:function(t){e.$set(e.registerForm,"birth",t)},expression:"registerForm.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:"地区",size:"mini"}},[i("el-input",{attrs:{placeholder:"地区"},model:{value:e.registerForm.location,callback:function(t){e.$set(e.registerForm,"location",t)},expression:"registerForm.location"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:"简介",size:"mini"}},[i("el-input",{attrs:{placeholder:"简介",type:"textarea"},model:{value:e.registerForm.introduction,callback:function(t){e.$set(e.registerForm,"introduction",t)},expression:"registerForm.introduction"}})],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.addSinger}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改歌手",visible:e.editVible,width:"400px",center:""},on:{"update:visible":function(t){e.editVible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"name",label:"歌手名",size:"mini"}},[i("el-input",{attrs:{placeholder:"歌手名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"sex",label:"性别",size:"mini"}},[i("el-radio-group",{model:{value:e.registerForm.sex,callback:function(t){e.$set(e.registerForm,"sex",t)},expression:"registerForm.sex"}},[i("el-radio",{attrs:{label:0}},[e._v("女")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("组合")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("不明")])],1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:"生日",size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:"地区",size:"mini"}},[i("el-input",{attrs:{placeholder:"地区"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:"简介",size:"mini"}},[i("el-input",{attrs:{placeholder:"简介",type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.editSave}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"删除歌手",visible:e.deleteVisible,width:"300px",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v("删除不可恢复,是否确定删除?")]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.deleteVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.deleteRow}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var s=i("VU/8")(o,l,!1,function(e){i("Ookg")},"data-v-b01e77a4",null);t.default=s.exports}});
//# sourceMappingURL=4.e1b9448e87282d6b9ad5.js.map